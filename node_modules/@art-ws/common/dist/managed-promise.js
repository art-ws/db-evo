"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ManagedPromise = void 0;
const tslib_1 = require("tslib");
const bluebird_1 = tslib_1.__importDefault(require("bluebird"));
// http://bluebirdjs.com/docs/api/cancellation.html
function ManagedPromise(args) {
    let fulfill;
    let rejected;
    const promise = new bluebird_1.default((resolve, reject, onCancel) => {
        fulfill = resolve;
        rejected = reject;
        if (typeof onCancel === "function") {
            onCancel(() => {
                if (typeof args?.onCancel === "function") {
                    args?.onCancel();
                }
            });
        }
    });
    promise.resolve = fulfill;
    promise.reject = rejected;
    return promise;
}
exports.ManagedPromise = ManagedPromise;
//# sourceMappingURL=managed-promise.js.map